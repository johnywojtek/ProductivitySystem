(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{17:function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"c",function(){return i}),n.d(t,"d",function(){return u}),n.d(t,"e",function(){return s}),n.d(t,"a",function(){return l}),n.d(t,"i",function(){return d}),n.d(t,"h",function(){return f}),n.d(t,"g",function(){return p}),n.d(t,"f",function(){return g}),n.d(t,"j",function(){return m}),n.d(t,"l",function(){return h}),n.d(t,"k",function(){return b}),n.d(t,"o",function(){return y}),n.d(t,"q",function(){return O}),n.d(t,"w",function(){return v}),n.d(t,"m",function(){return E}),n.d(t,"v",function(){return F}),n.d(t,"n",function(){return j}),n.d(t,"r",function(){return S}),n.d(t,"s",function(){return _}),n.d(t,"p",function(){return k}),n.d(t,"t",function(){return w}),n.d(t,"u",function(){return L});var r=n(8),a=n(55),o=n.n(a),c="COLLAPSE_MENU",i="COLLAPSE_TOGGLE",u="FULL_SCREEN",s="FULL_SCREEN_EXIT",l="CHANGE_LAYOUT",d="NAV_CONTENT_LEAVE",f="NAV_COLLAPSE_LEAVE",p="LOGIN_SUCCESS",g="LOGIN_ERROR",m="SIGNOUT_SUCCCESS",h="SIGNUP_SUCCESS",b="SIGNUP_ERROR",y=function(e){return function(t,n,r){r.getFirebase;var a=(0,r.getFirestore)();a.collection("days").doc(localStorage.getItem("day_id")).update(e).then(function(){return t({type:"ADD_ZG",payload:e})}).catch(function(e){return console.log(e)}),e.workBlocks.pop().isGold&&(console.log(e),a.collection("users").doc(e.uid).update({currentAmountIZG:a.FieldValue.increment(1)}).then(function(){return t({type:"ADD_ZG",payload:e})}).catch(function(e){return console.log(e)}))}},O=function(e,t){return function(n,r,a){a.getFirebase;(0,a.getFirestore)().collection("days").add({uid:e,created_at:o()().format(),workBlocks:[],daySummary:{planned_work_blocks:t,good_things_note:"",learned_note:"",mistakes_note:""}}).then(function(e){localStorage.setItem("day_id",e.id),localStorage.setItem("day_created_date",o()().format("DD/MM/YYYY")),n({type:"DAY_START"})}).catch(function(e){return console.log(e)})}},v=function(e){return function(t,n,a){a.getFirebase;(0,a.getFirestore)().collection("days").doc(localStorage.getItem("day_id")).update({daySummary:Object(r.a)({},e)}).then(function(){return t({type:"UPDATE_SUMMARY",payload:e})}).catch(function(e){return console.log(e)})}},E=function(e,t){return function(n,r,a){a.getFirebase;(0,a.getFirestore)().collection("tasks").doc(t).update({tasks:e})}},F=function(e,t,n){return function(a,o,c){c.getFirebase;(0,c.getFirestore)().collection("tasks").doc(e).update({tasks:o().firestore.data.tasks[e].tasks.map(function(e){return e.id==t?Object(r.a)({},e,{done:n}):e})})}},j=function(e,t,n){return function(t,r,a){a.getFirebase;(0,a.getFirestore)().collection("weeklyTasks").doc(n).update({secondaryTasks:e}).then(function(e){return console.log(e)}).catch(function(e){return console.log(e)})}},S=function(e,t){return function(n,r,a){a.getFirebase;(0,a.getFirestore)().collection("tasks").doc(t).update({tasks:e}).then(function(){return n({type:"ADD_ZG"})}).catch(function(e){return console.log(e)})}},_=function(e){return function(t,n,r){var a=(0,r.getFirebase)();console.log(e),a.auth().signInWithEmailAndPassword(e.email,e.password).then(function(){t({type:p})}).catch(function(e){t({type:g,err:e})})}},k=function(e,t){return function(n,r,a){a.getFirebase;(0,a.getFirestore)().collection("users").doc(t).update({currentLevel:e}).then(function(){return n({type:"ADD_ZG"})}).catch(function(e){return console.log(e)})}},w=function(){return function(e,t,n){(0,n.getFirebase)().auth().signOut().then(function(){e({type:m})})}},L=function(e){return function(t,n,r){var a=r.getFirebase,o=r.getFirestore,c=a(),i=o();c.auth().createUserWithEmailAndPassword(e.email,e.password).then(function(t){i.collection("users").doc(t.user.uid).set({userName:e.userName,currentLevel:!1,isDayEnd:!1});for(var n=0;n<7;n++)r=t.user.uid,a=n,i.collection("tasks").add({uid:r,dayId:a,tasks:[]});var r,a}).then(function(){t({type:h})}).catch(function(e){t({type:b,err:e})})}}},180:function(e,t,n){"use strict";t.a={defaultPath:"/dashboard/default",layout:"vertical",preLayout:null,collapseMenu:!1,layoutType:"menu-light",navIconColor:!1,headerBackColor:"header-default",navBackColor:"navbar-default",navBrandColor:"brand-default",navBackImage:!1,rtlLayout:!1,navFixedLayout:!0,headerFixedLayout:!1,boxLayout:!1,navDropdownIcon:"style1",navListIcon:"style1",navActiveListColor:"active-default",navListTitleColor:"title-default",navListTitleHide:!1,configBlock:!1,layout6Background:"linear-gradient(to right, #A445B2 0%, #D41872 52%, #FF0066 100%)",layout6BackSize:""}},182:function(e,t,n){"use strict";var r=n(0),a=n.n(r);t.a=function(){return a.a.createElement("div",{className:"loader-bg"},a.a.createElement("div",{className:"loader-track"},a.a.createElement("div",{className:"loader-fill"})))}},187:function(e,t,n){"use strict";t.a=function(e){return e.children}},339:function(e,t,n){e.exports=n(683)},683:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(193),c=n.n(o),i=n(20),u=n(76),s=n(117),l=n(54),d=n(29),f=n(336),p=n(3),g=n(337),m=n.n(g),h=n(55),b=n.n(h),y=(n(672),n(182)),O=n(187),v=n(188),E=n(189),F=n(192),j=n(190),S=n(191),_=function(e){function t(){return Object(v.a)(this,t),Object(F.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(E.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&window.scrollTo(0,0)}},{key:"render",value:function(){return this.props.children}}]),t}(a.a.Component),k=Object(p.h)(_),w=(a.a.lazy(function(){return Promise.all([n.e(5),n.e(38)]).then(n.bind(null,865))}),a.a.lazy(function(){return Promise.all([n.e(5),n.e(37)]).then(n.bind(null,866))})),L=[{path:"/auth/signup-1",exact:!0,name:"Signup 1",component:w},{path:"/auth/signin-1",exact:!0,name:"Signin 1",component:w}],I=m()({loader:function(){return Promise.all([n.e(11),n.e(15)]).then(n.bind(null,869))},loading:y.a}),A=Object(i.d)(Object(u.b)(function(e){return{auth:e.firebase.auth}}),Object(d.firestoreConnect)([{collection:"users"}]))(function(e){var t=Object(p.g)();Object(r.useEffect)(function(){var n=b()().format("DD/MM/YYYY");if(!e.auth.uid)return t.push("/auth/signin-1");t.listen(function(r,a){if(!e.auth.uid)return t.push("/auth/signin-1");console.log(t),"/day-start"!==r.pathname&&n!==localStorage.getItem("day_created_date")&&t.push("/day-start")}),n!==localStorage.getItem("day_created_date")&&(localStorage.removeItem("day_created_date"),t.push("/day-start"))},[]);var n=L.map(function(e,t){return e.component?a.a.createElement(p.b,{key:t,path:e.path,exact:e.exact,name:e.name,render:function(t){return a.a.createElement(e.component,t)}}):null});return a.a.createElement(O.a,null,a.a.createElement(k,null,a.a.createElement(r.Suspense,{fallback:a.a.createElement(y.a,null)},a.a.createElement(p.d,null,n,a.a.createElement(p.b,{path:"/",component:I})))))}),C=n(39),T=n.n(C);n(677),n(681);T.a.initializeApp({apiKey:"AIzaSyDtsvd4CTFj2xlBlpmV0RoWmldZ8eDO9ns",authDomain:"ewsproject-2c7fe.firebaseapp.com",databaseURL:"https://ewsproject-2c7fe.firebaseio.com",projectId:"ewsproject-2c7fe",storageBucket:"ewsproject-2c7fe.appspot.com",messagingSenderId:"1082461674219",appId:"1:1082461674219:web:b1580d6c438c7f47fa3cae"}),T.a.firestore().settings({timestampsInSnapshots:!0});var D=T.a;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var N=n(116),R=n(8),x=n(17),P=n(180),U=Object(R.a)({isOpen:[],isTrigger:[]},P.a,{isFullScreen:!1}),B={authError:null},G=Object(i.c)({appState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0,n=[],r=[];switch(t.type){case x.b:return Object(R.a)({},e,{collapseMenu:!e.collapseMenu});case x.c:if("sub"===t.menu.type){r=e.isOpen;var a=(n=e.isTrigger).indexOf(t.menu.id);a>-1&&(r=r.filter(function(e){return e!==t.menu.id}),n=n.filter(function(e){return e!==t.menu.id})),-1===a&&(r=[].concat(Object(N.a)(r),[t.menu.id]),n=[].concat(Object(N.a)(n),[t.menu.id]))}else{r=e.isOpen;var o=e.isTrigger.indexOf(t.menu.id);n=-1===o?[t.menu.id]:[],r=-1===o?[t.menu.id]:[]}return Object(R.a)({},e,{isOpen:r,isTrigger:n});case x.i:return Object(R.a)({},e,{isOpen:r,isTrigger:n});case x.h:return"sub"===t.menu.type?(r=e.isOpen,(n=e.isTrigger).indexOf(t.menu.id)>-1&&(r=r.filter(function(e){return e!==t.menu.id}),n=n.filter(function(e){return e!==t.menu.id})),Object(R.a)({},e,{isOpen:r,isTrigger:n})):Object(R.a)({},e);case x.d:return Object(R.a)({},e,{isFullScreen:!e.isFullScreen});case x.e:return Object(R.a)({},e,{isFullScreen:!1});case x.a:return Object(R.a)({},e,{layout:t.layout});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x.f:return Object(R.a)({},e,{authError:"Login failed"});case x.g:case x.l:return Object(R.a)({},e,{authError:null});case x.k:return Object(R.a)({},e,{authError:t.err.message});case x.j:default:return e}},firestore:l.firestoreReducer,firebase:d.firebaseReducer}),Y=n(15),M=Object(i.e)(G,Object(i.d)(Object(i.a)(f.a.withExtraArgument({getFirestore:l.getFirestore,getFirebase:d.getFirebase})),Object(l.reduxFirestore)(T.a,D))),V={firebase:T.a,config:{useFirestoreForProfile:!0,userProfile:"users"},dispatch:M.dispatch,createFirestoreInstance:l.createFirestoreInstance},Z=Object(Y.a)(),z=a.a.createElement(u.a,{store:M},a.a.createElement(d.ReactReduxFirebaseProvider,V,a.a.createElement(s.a,{history:Z},a.a.createElement(A,null))));c.a.render(z,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[339,9,10]]]);
//# sourceMappingURL=main.fa9e0b17.chunk.js.map